//Configuraciones del mapa
mapboxgl.accessToken = "pk.eyJ1Ijoiam1vemFyIiwiYSI6ImNsbXNkaXl6cjBkZWgya21yMmN2YWxlMHcifQ.MqRofl-Zw2eQfn5eTVbw7w";
var map = new mapboxgl.Map({
    container: 'pantalla_mapa',
    style: 'mapbox://styles/mapbox/streets-v12',
    center: [-77.08555632370167, -12.053057801094083],
    zoom: 18.5,
    //maxBounds: [
      //  [-77.0888854,-12.0627008], // Esquina suroeste de la zona permitida
       // [-77.0832369,-12.0490944]  // Esquina noreste de la zona permitida
      //]
});
map.addControl(new mapboxgl.NavigationControl());

var piso1 = {
    "type": "FeatureCollection",
    "name": "piso1GJ",
    "crs": { "type": "name", "properties": { "name": "urn:ogc:def:crs:OGC:1.3:CRS84" } },
    "features": [
    { "type": "Feature", "properties": { "id": null, "nombre_area": "Capilla", "codigo": "CAP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085313811084802, -12.053230704495387 ], [ -77.085363417261263, -12.053236661087235 ], [ -77.085368783668855, -12.053193918749828 ], [ -77.08531917749238, -12.053187962156436 ], [ -77.085313811084802, -12.053230704495387 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "109", "codigo": "SA109-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085608608277894, -12.053337205901105 ], [ -77.085689567317431, -12.053346927270281 ], [ -77.085698325484941, -12.053277170259536 ], [ -77.085617366445405, -12.053267448887837 ], [ -77.085608608277894, -12.053337205901105 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "108", "codigo": "SA108-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085527227460133, -12.053327433886302 ], [ -77.08560818649967, -12.053337155255479 ], [ -77.08561694466718, -12.053267398244733 ], [ -77.085535985627644, -12.053257676873034 ], [ -77.085527227460133, -12.053327433886302 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "106", "codigo": "SA106-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085365286697964, -12.053307988423098 ], [ -77.085446245737501, -12.053317709792275 ], [ -77.085455003905011, -12.053247952781529 ], [ -77.085374044865475, -12.05323823140983 ], [ -77.085365286697964, -12.053307988423098 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "107", "codigo": "SA107-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085446667515725, -12.053317760437901 ], [ -77.085527626555262, -12.053327481807077 ], [ -77.085536384722772, -12.053257724796332 ], [ -77.085455425683236, -12.053248003424633 ], [ -77.085446667515725, -12.053317760437901 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "Lab 8", "codigo": "LA008" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085203385857767, -12.053288547752215 ], [ -77.085284344897303, -12.053298269121392 ], [ -77.085293103064814, -12.053228512110646 ], [ -77.085212144025277, -12.053218790738947 ], [ -77.085203385857767, -12.053288547752215 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "105", "codigo": "SA105-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085284461301129, -12.053298319767018 ], [ -77.085365420340665, -12.053308041136194 ], [ -77.085374178508175, -12.053238284125449 ], [ -77.085293219468639, -12.05322856275375 ], [ -77.085284461301129, -12.053298319767018 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "Biblioteca", "codigo": "BTC" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085053536314774, -12.053414629415535 ], [ -77.085185495982756, -12.053430474811652 ], [ -77.085215821137751, -12.053188941200045 ], [ -77.085083861469755, -12.053173095789663 ], [ -77.085053536314774, -12.053414629415535 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "Escaleras" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.08567342803417, -12.053478491284871 ], [ -77.085718245842656, -12.053481226847159 ], [ -77.085716497716135, -12.053507533057857 ], [ -77.085671679907676, -12.053504797496078 ], [ -77.08567342803417, -12.053478491284871 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "Recepción" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085717953376573, -12.05348623444327 ], [ -77.085735880499954, -12.053487328667854 ], [ -77.08573471508214, -12.053504866139352 ], [ -77.085716787958759, -12.05350377191491 ], [ -77.085717953376573, -12.05348623444327 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "U. Trámite", "codigo": "UTD" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085803636779431, -12.053496843151105 ], [ -77.08583469187684, -12.05350091660395 ], [ -77.085830899008329, -12.053531336498159 ], [ -77.085799692330085, -12.053527589277607 ], [ -77.085803636779431, -12.053496843151105 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "Escaleras" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085841526909007, -12.053292900450755 ], [ -77.085846880082883, -12.053248319481851 ], [ -77.085873038942893, -12.053251603794676 ], [ -77.085867685769529, -12.05329618476358 ], [ -77.085841526909007, -12.053292900450755 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "U. Economía", "codigo": "UDE" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085807432988275, -12.053466318035397 ], [ -77.085838488085685, -12.053470391488242 ], [ -77.085834695217173, -12.053500811382451 ], [ -77.085803488538929, -12.053497064161899 ], [ -77.085807432988275, -12.053466318035397 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "CERSEU", "codigo": "CERSEU" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085797724033668, -12.053420524121965 ], [ -77.085792183482226, -12.05346479129441 ], [ -77.085761546066877, -12.053460480169221 ], [ -77.085767345830348, -12.05341701280857 ], [ -77.085797724033668, -12.053420524121965 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "USGOM", "codigo": "USGOM" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085845176643915, -12.0532938860868 ], [ -77.085839702789229, -12.053337484210726 ], [ -77.085778158599467, -12.053330059526129 ], [ -77.085783220211198, -12.05328674685363 ], [ -77.085845176643915, -12.0532938860868 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "DA", "codigo": "DAD" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.08582888737628, -12.053424417495581 ], [ -77.085823923594305, -12.053468542078408 ], [ -77.085792183482098, -12.053464792905729 ], [ -77.085797707056699, -12.053420657043333 ], [ -77.08582888737628, -12.053424417495581 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "Baño", "codigo": "SSHH-P1" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.08587297336814, -12.053251514906327 ], [ -77.085801643817859, -12.053242949821746 ], [ -77.085813686298209, -12.053147033906095 ], [ -77.085885015848461, -12.053155598993735 ], [ -77.08587297336814, -12.053251514906327 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "106", "codigo": "SA106-NP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085472946362472, -12.052810244693754 ], [ -77.085553548318231, -12.052822581461243 ], [ -77.085564559800119, -12.052753144487566 ], [ -77.085483957844474, -12.052740807717559 ], [ -77.085472946362472, -12.052810244693754 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "108", "codigo": "SA108-NP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085391924488832, -12.052797843655 ], [ -77.08547252644459, -12.052810180422494 ], [ -77.085483537926464, -12.052740743448815 ], [ -77.085402935970777, -12.052728406678806 ], [ -77.085391924488832, -12.052797843655 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "Baños", "codigo": "SSHH-P1" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085553552049092, -12.05282258756616 ], [ -77.08565452655121, -12.052838159224834 ], [ -77.085665538033041, -12.052768722251161 ], [ -77.08556412508382, -12.052753656118627 ], [ -77.085553552049092, -12.05282258756616 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "104", "codigo": "SGDFG" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.08577341220564, -12.05285791148872 ], [ -77.085840023411151, -12.05286810458405 ], [ -77.085851034893039, -12.052798667610373 ], [ -77.085783851779865, -12.05278840480211 ], [ -77.08577341220564, -12.05285791148872 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "102", "codigo": "SA102-NP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085840025408785, -12.052868104425507 ], [ -77.085920627364516, -12.052880441192995 ], [ -77.085931638846347, -12.052811004219322 ], [ -77.08585103689073, -12.052798667449311 ], [ -77.085840025408785, -12.052868104425507 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "103", "codigo": "SA103-NP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085774208462553, -12.052734495529839 ], [ -77.085854810418311, -12.052746832297327 ], [ -77.0858658219002, -12.05267739532365 ], [ -77.085785219944555, -12.052665058553643 ], [ -77.085774208462553, -12.052734495529839 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "101", "codigo": "SA101-NP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085855293532703, -12.052746906260349 ], [ -77.085935895488433, -12.052759243027838 ], [ -77.085946906970264, -12.052689806054165 ], [ -77.085866305014648, -12.052677469284154 ], [ -77.085855293532703, -12.052746906260349 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "107", "codigo": "SA107-NP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085516181181461, -12.052695012724833 ], [ -77.08559678313722, -12.052707349492321 ], [ -77.085607794619108, -12.052637912518644 ], [ -77.085527192663463, -12.052625575748637 ], [ -77.085516181181461, -12.052695012724833 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "109", "codigo": "SA109-NP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085435159307821, -12.052682611686079 ], [ -77.085515761263579, -12.052694948453572 ], [ -77.085526772745453, -12.052625511479894 ], [ -77.085446170789766, -12.052613174709885 ], [ -77.085435159307821, -12.052682611686079 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "105", "codigo": "SA105-NP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085597266251611, -12.052707423455344 ], [ -77.085677868207341, -12.052719760222832 ], [ -77.085688879689172, -12.052650323249159 ], [ -77.085608277733556, -12.052637986479148 ], [ -77.085597266251611, -12.052707423455344 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "Escaleras" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085781040084584, -12.052690837798009 ], [ -77.085736681619863, -12.052683877491685 ], [ -77.08574090885935, -12.052657854365158 ], [ -77.085785267324127, -12.052664814670965 ], [ -77.085781040084584, -12.052690837798009 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "Escaleras" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085442029575105, -12.052638778009303 ], [ -77.085397671110385, -12.052631817702979 ], [ -77.085401898349872, -12.052605794576452 ], [ -77.085446256814649, -12.05261275488226 ], [ -77.085442029575105, -12.052638778009303 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "Auditorio", "codigo": "AUD" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085889183970153, -12.053127431367926 ], [ -77.085728692482078, -12.053108159916611 ], [ -77.085750587900876, -12.05293376721405 ], [ -77.08591107938895, -12.05295303867789 ], [ -77.085889183970153, -12.053127431367926 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "Cancha", "codigo": "CAN" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085226988978675, -12.052972638785345 ], [ -77.085358948646657, -12.052988484181462 ], [ -77.085389273801653, -12.052746950569855 ], [ -77.085257314133656, -12.052731105159474 ], [ -77.085226988978675, -12.052972638785345 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "GYM", "codigo": "GYM" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085115353512307, -12.053176823080392 ], [ -77.085184168064714, -12.0531850861684 ], [ -77.085191612438834, -12.053125793253132 ], [ -77.085122797886399, -12.05311753016298 ], [ -77.085115353512307, -12.053176823080392 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "Escaleras", "codigo": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085179952146419, -12.053434700541395 ], [ -77.085224529731491, -12.053440081820879 ], [ -77.085223997980577, -12.053443913901859 ], [ -77.085206169902136, -12.05344177440444 ], [ -77.085203982172388, -12.053459162512322 ], [ -77.08522179585789, -12.053461339544635 ], [ -77.085221228927111, -12.053466238605049 ], [ -77.085176651342039, -12.053460857326074 ], [ -77.085179952146419, -12.053434700541395 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "Kiosco", "codigo": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085206163064001, -12.053441767172679 ], [ -77.085223994098044, -12.053443919684144 ], [ -77.085221793561786, -12.053461357537953 ], [ -77.085203962527729, -12.053459205026634 ], [ -77.085206163064001, -12.053441767172679 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "110", "codigo": "LA011" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085246321243062, -12.053411338719643 ], [ -77.085253815682279, -12.053350301410378 ], [ -77.085360810007657, -12.053363438661636 ], [ -77.08535331556844, -12.053424475970905 ], [ -77.085246321243062, -12.053411338719643 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "103", "codigo": "SA103-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085353315568454, -12.053424475970901 ], [ -77.085360810007671, -12.053363438661636 ], [ -77.085467804333049, -12.053376575912894 ], [ -77.085460309893833, -12.053437613222167 ], [ -77.085353315568454, -12.053424475970901 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "102", "codigo": "SA102-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085460309893833, -12.053437613222167 ], [ -77.085467804333049, -12.053376575912894 ], [ -77.085574798658442, -12.053389713164156 ], [ -77.085567304219225, -12.053450750473425 ], [ -77.085460309893833, -12.053437613222167 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "101", "codigo": "SA101-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085567304219225, -12.053450750473425 ], [ -77.085574798658442, -12.053389713164156 ], [ -77.085681792983806, -12.053402850415418 ], [ -77.085674298544603, -12.053463887724691 ], [ -77.085567304219225, -12.053450750473425 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "?", "codigo": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.08518057824709, -12.053429880300751 ], [ -77.085185504296675, -12.053430474959374 ], [ -77.085184896370578, -12.053435292387919 ], [ -77.085179970320993, -12.053434697729335 ], [ -77.08518057824709, -12.053429880300751 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "Control Eléctrico", "codigo": "CCE" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085680547246554, -12.052702448408168 ], [ -77.08569836942381, -12.052705027518815 ], [ -77.085695635104614, -12.052722459690285 ], [ -77.085677869743421, -12.052719819421014 ], [ -77.085680547246554, -12.052702448408168 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "Ascensor", "codigo": "ASC" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085701854283442, -12.05268670125024 ], [ -77.085719004970557, -12.05268928053742 ], [ -77.085707098191619, -12.052706204468937 ], [ -77.085698464503622, -12.052704993950455 ], [ -77.085701854283442, -12.05268670125024 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "DACC", "codigo": "DACC" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085839798681434, -12.053337301902008 ], [ -77.085834324826749, -12.053380900025934 ], [ -77.085772780636987, -12.053373475341337 ], [ -77.085777842248717, -12.053330162668837 ], [ -77.085839798681434, -12.053337301902008 ] ] ] ] } },
    { "type": "Feature", "properties": { "id": null, "nombre_area": "OCA", "codigo": "OCA" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085834367993826, -12.053380820835612 ], [ -77.085828894139141, -12.053424418959537 ], [ -77.085767349949379, -12.05341699427494 ], [ -77.085772411561109, -12.053373681602441 ], [ -77.085834367993826, -12.053380820835612 ] ] ] ] } }
    ]
    }
    

    var piso2 = {
        "type": "FeatureCollection",
        "name": "piso2GJ",
        "crs": { "type": "name", "properties": { "name": "urn:ogc:def:crs:OGC:1.3:CRS84" } },
        "features": [
        { "type": "Feature", "properties": { "id": null, "nombre_area": "213", "codigo": "SA213-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085608608277894, -12.053337205901105 ], [ -77.085689567317431, -12.053346927270281 ], [ -77.085698325484941, -12.053277170259536 ], [ -77.085617366445405, -12.053267448887837 ], [ -77.085608608277894, -12.053337205901105 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "212", "codigo": "SA212-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.08550491905919, -12.053324729350486 ], [ -77.085585878098726, -12.053334450719662 ], [ -77.085594636266237, -12.053264693708917 ], [ -77.0855136772267, -12.053254972337218 ], [ -77.08550491905919, -12.053324729350486 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "210", "codigo": "SA210-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085342978297021, -12.053305283887282 ], [ -77.085423937336557, -12.053315005256458 ], [ -77.085432695504068, -12.053245248245712 ], [ -77.085351736464531, -12.053235526874014 ], [ -77.085342978297021, -12.053305283887282 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "211", "codigo": "SA211-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085424359114782, -12.053315055902084 ], [ -77.085505318154318, -12.053324777271261 ], [ -77.085514076321829, -12.053255020260515 ], [ -77.085433117282292, -12.053245298888816 ], [ -77.085424359114782, -12.053315055902084 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "209", "codigo": "SA209-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085203385857767, -12.053288547752215 ], [ -77.085284344897303, -12.053298269121392 ], [ -77.085293103064814, -12.053228512110646 ], [ -77.085212144025277, -12.053218790738947 ], [ -77.085203385857767, -12.053288547752215 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "Tercio", "codigo": "TE" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085342818089103, -12.053305589946616 ], [ -77.085353142638311, -12.053224634179632 ], [ -77.085294047627073, -12.053217403212303 ], [ -77.085284326255362, -12.053298362251839 ], [ -77.085342818089103, -12.053305589946616 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "Magna", "codigo": "AM" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085078593783095, -12.053272288593684 ], [ -77.085203387162338, -12.053288538344427 ], [ -77.085215821137751, -12.053188941200045 ], [ -77.085093066588684, -12.053174204085643 ], [ -77.085078593783095, -12.053272288593684 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "Escaleras" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.08567342803417, -12.053478491284871 ], [ -77.085718245842656, -12.053481226847159 ], [ -77.085716497716135, -12.053507533057857 ], [ -77.085671679907676, -12.053504797496078 ], [ -77.08567342803417, -12.053478491284871 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "Salón Catedráticos", "codigo": "SC" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085698421605301, -12.053275794981767 ], [ -77.085710721087253, -12.053165758052943 ], [ -77.08576430084112, -12.053171485829413 ], [ -77.085752098974126, -12.053280649447125 ], [ -77.085698421605301, -12.053275794981767 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "Decanato", "codigo": "DEC" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085736723839148, -12.05345744955722 ], [ -77.085838494395503, -12.053470431318699 ], [ -77.085830899008329, -12.053531336498159 ], [ -77.085729717895049, -12.05351911291865 ], [ -77.085736723839148, -12.05345744955722 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "Escaleras" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085841526909007, -12.053292900450755 ], [ -77.085846880082883, -12.053248319481851 ], [ -77.085873038942893, -12.053251603794676 ], [ -77.085867685769529, -12.05329618476358 ], [ -77.085841526909007, -12.053292900450755 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "UP", "codigo": "UP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085828865677414, -12.053424489516848 ], [ -77.08582411120328, -12.053468602574748 ], [ -77.085761546066877, -12.053460480169221 ], [ -77.085767345830348, -12.05341701280857 ], [ -77.085828865677414, -12.053424489516848 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "OCAA", "codigo": "OCAA" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085845176643915, -12.0532938860868 ], [ -77.085839702789229, -12.053337484210726 ], [ -77.085778158599467, -12.053330059526129 ], [ -77.085783220211198, -12.05328674685363 ], [ -77.085845176643915, -12.0532938860868 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "Baños", "codigo": "SSHH-P2" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.08587297336814, -12.053251514906327 ], [ -77.085801643817859, -12.053242949821746 ], [ -77.085813686298209, -12.053147033906095 ], [ -77.085885015848461, -12.053155598993735 ], [ -77.08587297336814, -12.053251514906327 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "Data Center", "codigo": "DTC" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085472946362472, -12.052810244693754 ], [ -77.085553548318231, -12.052822581461243 ], [ -77.085564559800119, -12.052753144487566 ], [ -77.085483957844474, -12.052740807717559 ], [ -77.085472946362472, -12.052810244693754 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "208(Lab2)", "codigo": "LA002" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085391924488832, -12.052797843655 ], [ -77.08547252644459, -12.052810180422494 ], [ -77.085483537926464, -12.052740743448815 ], [ -77.085402935970777, -12.052728406678806 ], [ -77.085391924488832, -12.052797843655 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "Baños", "codigo": "SSHH-P2" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085553552049092, -12.05282258756616 ], [ -77.08565452655121, -12.052838159224834 ], [ -77.085665538033041, -12.052768722251161 ], [ -77.08556412508382, -12.052753656118627 ], [ -77.085553552049092, -12.05282258756616 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "204", "codigo": "SA204-NP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.08577341220564, -12.05285791148872 ], [ -77.085840023411151, -12.05286810458405 ], [ -77.085851034893039, -12.052798667610373 ], [ -77.085783851779865, -12.05278840480211 ], [ -77.08577341220564, -12.05285791148872 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "202", "codigo": "SA202-NP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085840025408785, -12.052868104425507 ], [ -77.085920627364516, -12.052880441192995 ], [ -77.085931638846347, -12.052811004219322 ], [ -77.08585103689073, -12.052798667449311 ], [ -77.085840025408785, -12.052868104425507 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "203", "codigo": "SA203-NP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085774208462553, -12.052734495529839 ], [ -77.085854810418311, -12.052746832297327 ], [ -77.0858658219002, -12.05267739532365 ], [ -77.085785219944555, -12.052665058553643 ], [ -77.085774208462553, -12.052734495529839 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "201", "codigo": "SA201-NP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085855293532703, -12.052746906260349 ], [ -77.085935895488433, -12.052759243027838 ], [ -77.085946906970264, -12.052689806054165 ], [ -77.085866305014648, -12.052677469284154 ], [ -77.085855293532703, -12.052746906260349 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "207(Lab1)", "codigo": "LA001" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085516181181461, -12.052695012724833 ], [ -77.08559678313722, -12.052707349492321 ], [ -77.085607794619108, -12.052637912518644 ], [ -77.085527192663463, -12.052625575748637 ], [ -77.085516181181461, -12.052695012724833 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "209(Lab3)", "codigo": "LA003" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085435159307821, -12.052682611686079 ], [ -77.085515761263579, -12.052694948453572 ], [ -77.085526772745453, -12.052625511479894 ], [ -77.085446170789766, -12.052613174709885 ], [ -77.085435159307821, -12.052682611686079 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "205", "codigo": "SA205-NP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085597266251611, -12.052707423455344 ], [ -77.085677868207341, -12.052719760222832 ], [ -77.085688879689172, -12.052650323249159 ], [ -77.085608277733556, -12.052637986479148 ], [ -77.085597266251611, -12.052707423455344 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "Escaleras" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085781040084584, -12.052690837798009 ], [ -77.085736681619863, -12.052683877491685 ], [ -77.08574090885935, -12.052657854365158 ], [ -77.085785267324127, -12.052664814670965 ], [ -77.085781040084584, -12.052690837798009 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "Escaleras" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085442029575105, -12.052638778009303 ], [ -77.085397671110385, -12.052631817702979 ], [ -77.085401898349872, -12.052605794576452 ], [ -77.085446256814649, -12.05261275488226 ], [ -77.085442029575105, -12.052638778009303 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "Comedor", "codigo": "COM" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085889183970153, -12.053127431367926 ], [ -77.085728692482078, -12.053108159916611 ], [ -77.085750587900876, -12.05293376721405 ], [ -77.08591107938895, -12.05295303867789 ], [ -77.085889183970153, -12.053127431367926 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "Escaleras", "codigo": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085179952146405, -12.053434700541493 ], [ -77.08522452812123, -12.053440078289714 ], [ -77.085224000379412, -12.05344429863605 ], [ -77.085223772490906, -12.05344610500995 ], [ -77.085222625851813, -12.053455186143989 ], [ -77.085221815048484, -12.053461569446767 ], [ -77.085221229734842, -12.05346624021324 ], [ -77.085176651342024, -12.053460857326172 ], [ -77.085179952146405, -12.053434700541493 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "206", "codigo": "SA206-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085245570284513, -12.05340984975976 ], [ -77.08531689983478, -12.053418414839008 ], [ -77.08532456323131, -12.053357377482019 ], [ -77.085253233681073, -12.053348812400834 ], [ -77.085245570284513, -12.05340984975976 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "205", "codigo": "SA205-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.08531689983478, -12.053418414839401 ], [ -77.085388229385046, -12.053426979918649 ], [ -77.085395892781577, -12.05336594256166 ], [ -77.085324563231339, -12.053357377480475 ], [ -77.08531689983478, -12.053418414839401 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "204", "codigo": "SA204-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085388229385032, -12.05342697991877 ], [ -77.085459558935298, -12.053435544998019 ], [ -77.085467222331829, -12.053374507641029 ], [ -77.085395892781591, -12.053365942559845 ], [ -77.085388229385032, -12.05342697991877 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "203", "codigo": "SA203-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085459558935284, -12.053435544997866 ], [ -77.08553088848555, -12.053444110077114 ], [ -77.085538551882081, -12.053383072720125 ], [ -77.085467222331843, -12.05337450763894 ], [ -77.085459558935284, -12.053435544997866 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": null, "codigo": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.08518057824709, -12.053429880300751 ], [ -77.085185504296675, -12.053430474959374 ], [ -77.085184896370578, -12.053435292387919 ], [ -77.085179970320993, -12.053434697729335 ], [ -77.08518057824709, -12.053429880300751 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "Control Electrico", "codigo": "CCE" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085680547246554, -12.052702448408168 ], [ -77.08569836942381, -12.052705027518815 ], [ -77.085695635104614, -12.052722459690285 ], [ -77.085677869743421, -12.052719819421014 ], [ -77.085680547246554, -12.052702448408168 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "Ascensor", "codigo": "ASC" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085701854283442, -12.05268670125024 ], [ -77.085719004970557, -12.05268928053742 ], [ -77.085707098191619, -12.052706204468937 ], [ -77.085698464503622, -12.052704993950455 ], [ -77.085701854283442, -12.05268670125024 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "UPPN", "codigo": "UPPN" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085839798681434, -12.053337301902008 ], [ -77.085834324826749, -12.053380900025934 ], [ -77.085772780636987, -12.053373475341337 ], [ -77.085777842248717, -12.053330162668837 ], [ -77.085839798681434, -12.053337301902008 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "Baños Adm.", "codigo": "SSHH-AD-2" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085834367993826, -12.053380820835612 ], [ -77.085828894139141, -12.053424418959537 ], [ -77.085767349949379, -12.05341699427494 ], [ -77.085772411561109, -12.053373681602441 ], [ -77.085834367993826, -12.053380820835612 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "207", "codigo": "SA207-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085102745853547, -12.053419775893067 ], [ -77.085181263128334, -12.053430616573099 ], [ -77.085192716925093, -12.053341524695421 ], [ -77.085113765199694, -12.053331418256901 ], [ -77.085102745853547, -12.053419775893067 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "Investigación", "codigo": "GI" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085056841903906, -12.053415348979231 ], [ -77.08510272622857, -12.053419811460506 ], [ -77.085113623503531, -12.053331427766176 ], [ -77.085067535186994, -12.053325558431055 ], [ -77.085056841903906, -12.053415348979231 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "Digitalización", "codigo": "ODG" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085585877105274, -12.053334438320928 ], [ -77.085608584134661, -12.053337236018205 ], [ -77.085617342302172, -12.053267479007459 ], [ -77.085594663342746, -12.053264751461423 ], [ -77.085585877105274, -12.053334438320928 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "202", "codigo": "SA202-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.08553088848555, -12.05344411007669 ], [ -77.085602218035817, -12.053452675155938 ], [ -77.085609881432347, -12.053391637798949 ], [ -77.085538551882109, -12.053383072717764 ], [ -77.08553088848555, -12.05344411007669 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": null, "nombre_area": "201", "codigo": "SA201-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085602218035788, -12.05345267515524 ], [ -77.085673547586055, -12.053461240234489 ], [ -77.085681210982585, -12.0534002028775 ], [ -77.085609881432347, -12.053391637796315 ], [ -77.085602218035788, -12.05345267515524 ] ] ] ] } }
        ]
        }
        
        
        var piso3 = {
            "type": "FeatureCollection",
            "name": "piso3GJ",
            "crs": { "type": "name", "properties": { "name": "urn:ogc:def:crs:OGC:1.3:CRS84" } },
            "features": [
            { "type": "Feature", "properties": { "id": null, "nombre_area": "310", "codigo": "SA310-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085608608277894, -12.053337205901105 ], [ -77.085689567317431, -12.053346927270281 ], [ -77.085698325484941, -12.053277170259536 ], [ -77.085617366445405, -12.053267448887837 ], [ -77.085608608277894, -12.053337205901105 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "301-Lab7", "codigo": "LA301-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.08550491905919, -12.053324729350486 ], [ -77.085585878098726, -12.053334450719662 ], [ -77.085594636266237, -12.053264693708917 ], [ -77.0855136772267, -12.053254972337218 ], [ -77.08550491905919, -12.053324729350486 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "309-Soporte Técnico", "codigo": "SA309-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085342978297021, -12.053305283887282 ], [ -77.085423937336557, -12.053315005256458 ], [ -77.085432695504068, -12.053245248245712 ], [ -77.085351736464531, -12.053235526874014 ], [ -77.085342978297021, -12.053305283887282 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "302-Lab6", "codigo": "SA302-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085424359114782, -12.053315055902084 ], [ -77.085505318154318, -12.053324777271261 ], [ -77.085514076321829, -12.053255020260515 ], [ -77.085433117282292, -12.053245298888816 ], [ -77.085424359114782, -12.053315055902084 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "308-Lab5", "codigo": "LA308-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085203385857767, -12.053288547752215 ], [ -77.085284344897303, -12.053298269121392 ], [ -77.085293103064814, -12.053228512110646 ], [ -77.085212144025277, -12.053218790738947 ], [ -77.085203385857767, -12.053288547752215 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "311", "codigo": "SA311-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085342818089103, -12.053305589946616 ], [ -77.085353142638311, -12.053224634179632 ], [ -77.085294047627073, -12.053217403212303 ], [ -77.085284326255362, -12.053298362251839 ], [ -77.085342818089103, -12.053305589946616 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "307-lab4-CENPRO", "codigo": "LA307-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085568996006486, -12.053448163991487 ], [ -77.085675990331879, -12.053461011608496 ], [ -77.085683653728452, -12.053399974260875 ], [ -77.08557665940306, -12.053387126640937 ], [ -77.085568996006486, -12.053448163991487 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "><" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.08567342803417, -12.053478491284871 ], [ -77.085718245842656, -12.053481226847159 ], [ -77.085716497716135, -12.053507533057857 ], [ -77.085671679907676, -12.053504797496078 ], [ -77.08567342803417, -12.053478491284871 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "Salón Catedráticos", "codigo": "SA-CA" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085698421605301, -12.053275794981767 ], [ -77.085710721087253, -12.053165758052943 ], [ -77.08576430084112, -12.053171485829413 ], [ -77.085752098974126, -12.053280649447125 ], [ -77.085698421605301, -12.053275794981767 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "<>" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085841526909007, -12.053292900450755 ], [ -77.085846880082883, -12.053248319481851 ], [ -77.085873038942893, -12.053251603794676 ], [ -77.085867685769529, -12.05329618476358 ], [ -77.085841526909007, -12.053292900450755 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "Escuela Sistemas", "codigo": "OF309" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085828907314195, -12.053424431706187 ], [ -77.085822839825283, -12.053468480585879 ], [ -77.085761546066877, -12.053460480169221 ], [ -77.085767345830348, -12.05341701280857 ], [ -77.085828907314195, -12.053424431706187 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "Unidad de Matricula", "codigo": "UN-MA" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085845176643915, -12.0532938860868 ], [ -77.085839702789229, -12.053337484210726 ], [ -77.085778158599467, -12.053330059526129 ], [ -77.085783220211198, -12.05328674685363 ], [ -77.085845176643915, -12.0532938860868 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "Baños", "codigo": "SSHH-P3" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.08587297336814, -12.053251514906327 ], [ -77.085801643817859, -12.053242949821746 ], [ -77.085813686298209, -12.053147033906095 ], [ -77.085885015848461, -12.053155598993735 ], [ -77.08587297336814, -12.053251514906327 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "304-Lab5", "codigo": "LA304-NP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085472946362472, -12.052810244693754 ], [ -77.085553548318231, -12.052822581461243 ], [ -77.085564559800119, -12.052753144487566 ], [ -77.085483957844474, -12.052740807717559 ], [ -77.085472946362472, -12.052810244693754 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "306-Lab7", "codigo": "LA306-NP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085391924488832, -12.052797843655 ], [ -77.08547252644459, -12.052810180422494 ], [ -77.085483537926464, -12.052740743448815 ], [ -77.085402935970777, -12.052728406678806 ], [ -77.085391924488832, -12.052797843655 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "Baños", "codigo": "SSHH-P3" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085553552049092, -12.05282258756616 ], [ -77.08565452655121, -12.052838159224834 ], [ -77.085665538033041, -12.052768722251161 ], [ -77.08556412508382, -12.052753656118627 ], [ -77.085553552049092, -12.05282258756616 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "302", "codigo": "SA302-NP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.08577341220564, -12.05285791148872 ], [ -77.085920595302937, -12.052880369056997 ], [ -77.085937937319201, -12.052758935204928 ], [ -77.085791895648981, -12.052736329750902 ], [ -77.08577341220564, -12.05285791148872 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "301-Música", "codigo": "SA301-NP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085774208462553, -12.052734495529839 ], [ -77.085937660768764, -12.052758484448137 ], [ -77.085947616584079, -12.052690690618064 ], [ -77.085785219944555, -12.052665058553643 ], [ -77.085774208462553, -12.052734495529839 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "305-Lab6", "codigo": "LA305-NP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085516181181461, -12.052695012724833 ], [ -77.08559678313722, -12.052707349492321 ], [ -77.085607794619108, -12.052637912518644 ], [ -77.085527192663463, -12.052625575748637 ], [ -77.085516181181461, -12.052695012724833 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "307-Lab8", "codigo": "LA307-NP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085435159307821, -12.052682611686079 ], [ -77.085515761263579, -12.052694948453572 ], [ -77.085526772745453, -12.052625511479894 ], [ -77.085446170789766, -12.052613174709885 ], [ -77.085435159307821, -12.052682611686079 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "303-Lab4", "codigo": "LA303-NP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085597266251611, -12.052707423455344 ], [ -77.085677868207341, -12.052719760222832 ], [ -77.085688879689172, -12.052650323249159 ], [ -77.085608277733556, -12.052637986479148 ], [ -77.085597266251611, -12.052707423455344 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "<>" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085781040084584, -12.052690837798009 ], [ -77.085736681619863, -12.052683877491685 ], [ -77.08574090885935, -12.052657854365158 ], [ -77.085785267324127, -12.052664814670965 ], [ -77.085781040084584, -12.052690837798009 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "<>" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085442029575105, -12.052638778009303 ], [ -77.085397671110385, -12.052631817702979 ], [ -77.085401898349872, -12.052605794576452 ], [ -77.085446256814649, -12.05261275488226 ], [ -77.085442029575105, -12.052638778009303 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "Unidad de Posgrado", "codigo": "UN-PO" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085889183970153, -12.053127431367926 ], [ -77.085728692482078, -12.053108159916611 ], [ -77.085750587900876, -12.05293376721405 ], [ -77.08591107938895, -12.05295303867789 ], [ -77.085889183970153, -12.053127431367926 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "><", "codigo": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085179952146419, -12.053434700541395 ], [ -77.085224529731491, -12.053440081820879 ], [ -77.085221228927111, -12.053466238605049 ], [ -77.085176651342039, -12.053460857326074 ], [ -77.085179952146419, -12.053434700541395 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "306-Lab3", "codigo": "LA306-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085462001681108, -12.053435316372827 ], [ -77.085568996006501, -12.053448163989836 ], [ -77.085576659403074, -12.053387126642216 ], [ -77.085469665077682, -12.053374279022277 ], [ -77.085462001681108, -12.053435316372827 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "305-Lab2", "codigo": "LA305-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085355007355702, -12.053422468753554 ], [ -77.085462001681094, -12.053435316370564 ], [ -77.085469665077667, -12.053374279022943 ], [ -77.085362670752275, -12.053361431403005 ], [ -77.085355007355702, -12.053422468753554 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "304-Lab1", "codigo": "LA304-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085248013030323, -12.053409621133666 ], [ -77.085355007355716, -12.053422468750675 ], [ -77.085362670752289, -12.053361431403054 ], [ -77.085255676426897, -12.053348583783116 ], [ -77.085248013030323, -12.053409621133666 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": null, "codigo": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.08518057824709, -12.053429880300751 ], [ -77.085185504296675, -12.053430474959374 ], [ -77.085184896370578, -12.053435292387919 ], [ -77.085179970320993, -12.053434697729335 ], [ -77.08518057824709, -12.053429880300751 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "Control Electrico", "codigo": "CCE" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085680547246554, -12.052702448408168 ], [ -77.08569836942381, -12.052705027518815 ], [ -77.085695635104614, -12.052722459690285 ], [ -77.085677869743421, -12.052719819421014 ], [ -77.085680547246554, -12.052702448408168 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "Ascensor", "codigo": "ASC" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085701854283442, -12.05268670125024 ], [ -77.085719004970557, -12.05268928053742 ], [ -77.085707098191619, -12.052706204468937 ], [ -77.085698464503622, -12.052704993950455 ], [ -77.085701854283442, -12.05268670125024 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "Escuela Software", "codigo": "OF311" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085839798681434, -12.053337301902008 ], [ -77.085834324826749, -12.053380900025934 ], [ -77.085772780636987, -12.053373475341337 ], [ -77.085777842248717, -12.053330162668837 ], [ -77.085839798681434, -12.053337301902008 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "Baños Docentes", "codigo": "SSHH-D-AP3" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085834367993826, -12.053380820835612 ], [ -77.085828894139141, -12.053424418959537 ], [ -77.085767349949379, -12.05341699427494 ], [ -77.085772411561109, -12.053373681602441 ], [ -77.085834367993826, -12.053380820835612 ] ] ] ] } },
            { "type": "Feature", "properties": { "id": null, "nombre_area": "303-Robotica/IOT", "codigo": "LA303-AP" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -77.085585877105274, -12.053334438320928 ], [ -77.085608584134661, -12.053337236018205 ], [ -77.085617342302172, -12.053267479007459 ], [ -77.085594663342746, -12.053264751461423 ], [ -77.085585877105274, -12.053334438320928 ] ] ] ] } }
            ]
            }
                      
var borde ={
    "type": "FeatureCollection",
    "name": "bordeFISI",
    "crs": { "type": "name", "properties": { "name": "urn:ogc:def:crs:OGC:1.3:CRS84" } },
    "features": [
    { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ ] } },
    { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085389841528567, -12.052603463149408 ], [ -77.085708455068485, -12.052652979347117 ] ] ] } },
    { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085694391026635, -12.053276250332443 ], [ -77.085698268463048, -12.053276595055527 ], [ -77.085707567202363, -12.053191651307301 ] ] ] } },
    { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085685281676049, -12.053121126126781 ], [ -77.085631115409385, -12.053112736163946 ], [ -77.085705847088761, -12.052960440715076 ] ] ] } },
    { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085894519619757, -12.052876715985468 ], [ -77.085885190598049, -12.052950041973977 ] ] ] } },
    { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085773702225993, -12.052857670006272 ], [ -77.085751163336724, -12.052934470008132 ] ] ] } },
    { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ ] } },
    { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ ] } },
    { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ ] } },
    { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ ] } },
    { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ ] } },
    { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ ] } },
    { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085682974103591, -12.052821189801277 ], [ -77.085659959106167, -12.052804017496291 ], [ -77.08566554405526, -12.052768725218991 ] ] ] } },
    { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085720096128327, -12.052848929228816 ], [ -77.08572006419611, -12.052848864033384 ], [ -77.0857045629255, -12.052837297986182 ] ] ] } },
    { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085708218724463, -12.052653168992748 ], [ -77.085701773697338, -12.052686781320894 ], [ -77.085719185483882, -12.05268920235801 ] ] ] } },
    { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085862244048812, -12.05312420252065 ], [ -77.085858722586607, -12.053152683698736 ], [ -77.085726382529145, -12.053138142999916 ], [ -77.085729756936985, -12.053108442846694 ], [ -77.085862244048812, -12.053124208965995 ] ] ] } },
    { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085733347790907, -12.053519582500098 ], [ -77.085715959266579, -12.053517497130631 ], [ -77.085716497978609, -12.053507529351114 ], [ -77.085671721242022, -12.0535044407554 ], [ -77.085674893689998, -12.053462815475672 ] ] ] } },
    { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085654530816669, -12.052838166712235 ], [ -77.085391839935696, -12.052797966308063 ], [ -77.085401488314815, -12.052738391722569 ], [ -77.085401114739099, -12.052738313890073 ] ] ] } },
    { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085740909601611, -12.052657856860934 ], [ -77.085695669449805, -12.052722415280858 ] ] ] } },
    { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085750088486591, -12.052854041275825 ], [ -77.085720041584395, -12.052849338174953 ] ] ] } },
    { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085740909601611, -12.052657855599977 ], [ -77.085947746248976, -12.052690167940566 ], [ -77.085920638203703, -12.052880459177326 ], [ -77.085773449164648, -12.052857697813348 ] ] ] } },
    { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.08537682208042, -12.052733252644975 ], [ -77.085352031015631, -12.05272808755964 ], [ -77.085389833266973, -12.052603471228874 ] ] ] } },
    { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085709958123076, -12.053169810307102 ], [ -77.08571035409193, -12.05316619314161 ], [ -77.085679984421361, -12.053163718129227 ], [ -77.085720094231078, -12.052848926133871 ] ] ] } },
    { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085694655397234, -12.053276207242064 ], [ -77.085212129478336, -12.053218895905808 ] ] ] } }
    ]
    }
    
    var borde1 ={
        "type": "FeatureCollection",
        "name": "borde1",
        "crs": { "type": "name", "properties": { "name": "urn:ogc:def:crs:OGC:1.3:CRS84" } },
        "features": [
        { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085800200101062, -12.053527124611982 ], [ -77.085779722505364, -12.053524802742421 ] ] ] } },
        { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085188839997656, -12.053403775263792 ], [ -77.085217627342359, -12.053406967835871 ] ] ] } },
        { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085217664439455, -12.053406387368225 ], [ -77.08521751605106, -12.053407765978886 ] ] ] } },
        { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085246488881182, -12.053411103667829 ], [ -77.085240108181068, -12.053419810682259 ] ] ] } },
        { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085224527401721, -12.053439836814391 ], [ -77.085229572606465, -12.053433161437178 ] ] ] } }
        ]
        }
    
    var borde2={
        "type": "FeatureCollection",
        "name": "borde2",
        "crs": { "type": "name", "properties": { "name": "urn:ogc:def:crs:OGC:1.3:CRS84" } },
        "features": [
        { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085800200101062, -12.053527124611982 ], [ -77.085779722505364, -12.053524802742421 ] ] ] } },
        { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085078513241157, -12.053271646281448 ], [ -77.085067532501427, -12.053325920028358 ] ] ] } },
        { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085245598550955, -12.053409652498729 ], [ -77.085224527401763, -12.053440417281969 ] ] ] } },
        { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085682750702532, -12.052821057664586 ], [ -77.085704415405218, -12.052837310793713 ] ] ] } },
        { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085376328708989, -12.052733116609573 ], [ -77.085401257955908, -12.052738340831469 ] ] ] } }
        ]
        }
    var borde3={
        "type": "FeatureCollection",
        "name": "borde3",
        "crs": { "type": "name", "properties": { "name": "urn:ogc:def:crs:OGC:1.3:CRS84" } },
        "features": [
        { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085761841706201, -12.053459717828144 ], [ -77.085727415603301, -12.05345565455538 ], [ -77.085717325193798, -12.053480614658529 ] ] ] } },
        { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085248121153299, -12.05340950738182 ], [ -77.085224379013368, -12.05344027216508 ] ] ] } },
        { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085203604640938, -12.053287609149328 ], [ -77.085180456054488, -12.053430404216117 ] ] ] } },
        { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085682899090898, -12.052821130223206 ], [ -77.085704637987803, -12.052837383352324 ] ] ] } },
        { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "MultiLineString", "coordinates": [ [ [ -77.085376625485679, -12.052733189168217 ], [ -77.085401109567485, -12.052738340831473 ] ] ] } }
        ]
        }
    

map.on('load', () => {
    // Add a data source containing GeoJSON data.
    map.addSource('m1', {
        'type': 'geojson',
        'data': piso1
        
    });

    map.addSource('m2', {
        'type': 'geojson',
        'data': piso2
        
    });

    map.addSource('m3', {
        'type': 'geojson',
        'data': piso3
        
    });
    //borde
    map.addSource('bor', {
        'type': 'geojson',
        'data': borde
        
    });

    map.addSource('bor1', {
        'type': 'geojson',
        'data': borde1
        
    });
    map.addSource('bor2', {
        'type': 'geojson',
        'data': borde2
        
    });
    map.addSource('bor3', {
        'type': 'geojson',
        'data': borde3
        
    });
            //Cargamos el borde
            map.addLayer({
                'id': 'bd',
                'type': 'line',
                'source': 'bor',
                'layout': {},
                'paint': {
                    'line-color': '#000',
                    'line-width': 2
                }
            });

            //Cargamos el borde 1
            map.addLayer({
                'id': 'bd1',
                'type': 'line',
                'source': 'bor1',
                'layout': {},
                'paint': {
                    'line-color': '#000',
                    'line-width': 2
                }
            });
            
    
            //Cargamos la capa1
            // Add a new layer to visualize the polygon.
            map.addLayer({
                'id': 'maine1',
                'type': 'fill',
                'source': 'm1', // reference the data source
                'layout': {},
                'paint': {
                    'fill-color': [
                        'match',
                        ['get','tipo'],
                        'otro','red',
                        'salon','blue',
                        'white'
    
                    ], // colores por tipos
                    'fill-opacity': 1
                }
            });
        // Add a black outline around the polygon.
        map.addLayer({
            'id': 'outline1',
            'type': 'line',
            'source': 'm1',
            'layout': {},
            'paint': {
                'line-color': '#000',
                'line-width': 2
            }
        });

        map.addLayer({
            'id': 'poi-labels1',
            'type': 'symbol',
            'source': 'm1',
            'layout': {
            'text-field': ['get', 'nombre_area'],
            'text-radial-offset': 0.0,
            'text-size': 20,
            'text-justify': 'auto',
            'icon-image': ['get', 'icon']
            }
            });



            //Cargamos la capa2
            // Add a new layer to visualize the polygon.
            map.addLayer({
                'id': 'maine2',
                'type': 'fill',
                'source': 'm2', // reference the data source
                'layout': {},
                'paint': {
                    'fill-color': [
                        'match',
                        ['get','tipo'],
                        'otro','red',
                        'salon','blue',
                        'white'
    
                    ], // colores por tipos
                    'fill-opacity': 1
                }
            });
        // Add a black outline around the polygon.
        map.addLayer({
            'id': 'outline2',
            'type': 'line',
            'source': 'm2',
            'layout': {},
            'paint': {
                'line-color': '#000',
                'line-width': 2
            }
        });

        map.addLayer({
            'id': 'poi-labels2',
            'type': 'symbol',
            'source': 'm2',
            'layout': {
            'text-field': ['get', 'nombre_area'],
            'text-radial-offset': 0.0,
            'text-size': 20,
            'text-justify': 'auto',
            'icon-image': ['get', 'icon']
            }
            });
            //Cargamos el borde 2
            map.addLayer({
                'id': 'bd2',
                'type': 'line',
                'source': 'bor2',
                'layout': {},
                'paint': {
                    'line-color': '#000',
                    'line-width': 2
                }
            });
            

            map.setLayoutProperty('maine2', 'visibility', 'none');
            map.setLayoutProperty('outline2', 'visibility', 'none');
            map.setLayoutProperty('poi-labels2', 'visibility', 'none');
            map.setLayoutProperty('bd2', 'visibility', 'none');
            
    
    //Cargamos la capa3
            // Add a new layer to visualize the polygon.
            map.addLayer({
                'id': 'maine3',
                'type': 'fill',
                'source': 'm3', // reference the data source
                'layout': {},
                'paint': {
                    'fill-color': [
                        'match',
                        ['get','tipo'],
                        'otro','red',
                        'salon','blue',
                        'white'
    
                    ], // colores por tipos
                    'fill-opacity': 0.9
                }
            });
        // Add a black outline around the polygon.
        map.addLayer({
            'id': 'outline3',
            'type': 'line',
            'source': 'm3',
            'layout': {},
            'paint': {
                'line-color': '#000',
                'line-width': 2
            }
        });

        map.addLayer({
            'id': 'poi-labels3',
            'type': 'symbol',
            'source': 'm3',
            'layout': {
            'text-field': ['get', 'nombre_area'],
            'text-radial-offset': 0.0,
            'text-size': 10,
            'text-justify': 'auto',
            'icon-image': ['get', 'icon']
            }
            });
            
            //Cargamos el borde 3
            map.addLayer({
                'id': 'bd3',
                'type': 'line',
                'source': 'bor3',
                'layout': {},
                'paint': {
                    'line-color': '#000',
                    'line-width': 2
                }
            });

            map.setLayoutProperty('maine3', 'visibility', 'none');
            map.setLayoutProperty('outline3', 'visibility', 'none');
            map.setLayoutProperty('poi-labels3', 'visibility', 'none');
            map.setLayoutProperty('bd3', 'visibility', 'none');        
    });

    function mostrar(code)
    { 
      var parametros = 
      {
        "codigo" : code,
        "apellido" : "hurtado",
        "telefono" : "123456789"
      };

      $.ajax({
        data: parametros,
        url: '../controlador/controlador_ajax_area.php',
        type: 'POST',
        
        beforesend: function()
        {
          $('#mostrar_mensaje').html("Mensaje antes de Enviar");
        },

        success: function(mensaje)
        {
          $('#mostrar_datos').html(mensaje);
        }
      });
    }

    let markers1 = [];
let markers2 = [];
let markers3 = [];

function removeAllMarkers() {
    markers1.forEach(markerObj => markerObj.marker.remove());
    markers1 = [];
    markers2.forEach(markerObj => markerObj.marker.remove());
    markers2 = [];
    markers3.forEach(markerObj => markerObj.marker.remove());
    markers3 = [];
}

function toggleLayer(layerId) {
    // Oculta todas las capas
    const layers = ['maine', 'outline', 'poi-labels', 'bd'];
    const pisos = [1, 2, 3];
    pisos.forEach(piso => {
        layers.forEach(layer => {
            map.setLayoutProperty(layer + piso, 'visibility', 'none');
        });
    });

    // Muestra la capa seleccionada
    layers.forEach(layer => {
        map.setLayoutProperty(layer + layerId, 'visibility', 'visible');
    });

    // Mostrar la ruta correspondiente al layerId
    var routeId = 'route' + layerId;
    if (map.getLayer(routeId)) {
        map.setLayoutProperty(routeId, 'visibility', 'visible');
    }

    // Ocultar todas las demás rutas
    ['route1', 'route2', 'route3'].forEach(function(route) {
        if (route !== routeId && map.getLayer(route)) {
            map.setLayoutProperty(route, 'visibility', 'none');
        }
    });

    // Mostrar los marcadores correspondientes al layerId y ocultar los demás
    markers1.forEach(markerObj => {
        if (markerObj.layerId === layerId) {
            markerObj.marker.addTo(map);
        } else {
            markerObj.marker.remove();
        }
    });
}
    
    function colorear_mostrar(codigo){
        if (codigo != null) {
            mostrar(codigo);
            mostrar_info();
        
    //¨Para pintar un poligono    
    // Cambia el color del polígono cuando se hace clic en él.
    map.setPaintProperty('maine1', 'fill-color', [
        'case',
        ['==', ['get', 'codigo'], codigo],
        '#68141C',
        '#fff' // color predeterminado de la capa
      ]);
      map.setPaintProperty('poi-labels1', 'text-color', ['case', ['==', ['get', 'codigo'], codigo], '#fff', '#000']);
      
      // Cambia el color del polígono cuando se hace clic en él.
    map.setPaintProperty('maine2', 'fill-color', [
        'case',
        ['==', ['get', 'codigo'], codigo],
        '#68141C',
        '#fff' // color predeterminado de la capa
      ]); 
      map.setPaintProperty('poi-labels2', 'text-color', ['case', ['==', ['get', 'codigo'], codigo], '#fff', '#000']);
      // Cambia el color del polígono cuando se hace clic en él.
    map.setPaintProperty('maine3', 'fill-color', [
        'case',
        ['==', ['get', 'codigo'], codigo],
        '#68141C',
        '#fff' // color predeterminado de la capa
      ]);
      map.setPaintProperty('poi-labels3', 'text-color', ['case', ['==', ['get', 'codigo'], codigo], '#fff', '#000']);
    }  
    }
    

    //Eventos

    function handleLayerClick(e) {
    //para centrarlo en el mapa
     var center = turf.center(e.features[0].geometry);

    // Centra el mapa en las coordenadas del centro del polígono
    map.flyTo({
        center: center.geometry.coordinates,
        zoom: 19 // Puedes ajustar el nivel de zoom deseado
    });

    //para hacer que se muestre la info del mapa
        var codigo = e.features[0].properties.codigo;
        colorear_mostrar(codigo);
    }    

    

    // Asigna la función de manejador de clics a las capas 'maine1'
map.on('click', 'maine1', handleLayerClick);

// Asigna la misma función de manejador de clics a las capas 'maine2'
map.on('click', 'maine2', handleLayerClick);

// Asigna la misma función de manejador de clics a las capas 'maine3'
map.on('click', 'maine3', handleLayerClick);



  map.on('load', function() {
    map.addControl(new mapboxgl.GeolocateControl({
      positionOptions: {
        enableHighAccuracy: true
      },
      trackUserLocation: true
    }));
  });

//APARTADO DE RUTAS
const graph = {
    
    //PISO 1
    'entrada': { 'A': 5},
    'A': { 'UTD': 5, 'B': 5},
    'B': { 'A': 5, 'B1': 5, 'CERSEU': 5, 'C': 5 },
    'B1': { 'B': 5, 'UDE': 5, 'DAD': 5 },
    
    'C': { 'escalera1A': 5, 'D': 5 },//la escalera cambia
    'D': { 'C': 5, 'OCA': 5, 'L': 5, 'E': 5 },
    'E': { 'D': 5, 'SA109-AP': 5, 'F': 5, 'SA101-AP': 5},
    'F': { 'E': 5, 'SA108-AP': 5, 'SA102-AP': 5, 'G': 5},
    'G': { 'F': 5, 'SA107-AP': 5, 'H': 5 },
    'H': { 'G': 5, 'SA103-AP': 5, 'SA106-AP': 5, 'I': 5 },
    'I': { 'H': 5, 'SA105-AP': 5, 'LA011': 5, 'J': 5 },
    'J': { 'I': 5, 'LA008': 5, 'BTC': 5, 'K': 5},
    'K': { 'salida1A': 5, 'kiosco': 5, 'escalera1B': 5, 'J':5 }, //aca hay datos faltantes

    'L': { 'D': 5, 'DACC': 5, 'M': 5 },
    'M': { 'L': 5, 'USGOM': 5, 'N': 5 },
    'N': { 'M': 5, 'escalera1d': 5, 'O': 5 }, //escalera
    'O': { 'N': 5, 'baño1p': 5, 'entradapatio': 5, 'P': 5,  },//patio
    'P': { 'O': 5, 'Q': 5 },
    'Q': { 'P': 5, 'R': 5 },
    'R': { 'Q': 5, 'AUD': 5, 'S': 5 },
    'S': { 'R': 5, 'T': 5 },
    'T': { 'S': 5, 'U': 5 },

    'U': { 'T': 5, 'V': 5, 'X': 5 },
    'V': { 'U': 5, 'SA103-NP': 5, 'SGDFG': 5, 'W': 5 },
    'W': { 'V': 5, 'SA101-NP': 5, 'SA102-NP': 5},

    'X': { 'U': 5, 'escaleran': 5, 'entradapatio3': 5, 'Y': 5 },
    'Y': { 'X': 5, 'SA105-NP': 5, 'bañonuevo': 5, 'Z': 5 },
    'Z': { 'Y': 5, 'SA107-NP': 5, 'SA106-NP': 5, 'a': 5 },
    'a': { 'Z': 5, 'SA109-NP': 5, 'SA108-NP': 5, 'b': 5 },
    'b': { 'a': 5, 'escalera1c': 5, 'entradapatio2': 5 },

    'SA101-AP':{ 'E': 5},
    'SA102-AP':{ 'F': 5},
    'SA103-AP':{ 'H': 5},
    'LA011':{ 'I': 5},

    'SA109-AP':{ 'E': 5},
    'SA108-AP':{ 'F': 5},
    'SA107-AP':{ 'G': 5},
    'SA106-AP':{ 'H': 5},
    'SA105-AP':{ 'I': 5},
    'LA008':{ 'J': 5},
    'BTC':{ 'J': 5},

    'UTD':{ 'A': 5},
    'UDE':{ 'B1': 5},
    'DAD':{ 'B1': 5},
    'CERSEU':{ 'B': 5},
    'OCA':{ 'D': 5},
    'DACC':{ 'L': 5},
    'USGOM':{ 'M': 5},
    'escalera1d':{ 'N': 5},
    'baño1p':{ 'O': 5},
    'entradapatio':{ 'O': 5},
    'AUD':{ 'R': 5},

    'SA101-NP':{ 'W': 5},
    'SA102-NP':{ 'W': 5},
    'SA103-NP':{ 'V': 5},
    'SGDFG':{ 'V': 5},
    'escaleran':{ 'X': 5},
    'entradapatio3':{ 'X': 5},

    'SA105-NP':{ 'Y': 5},
    'SA107-NP':{ 'Z': 5},
    'SA109-NP':{ 'a': 5},

    'bañonuevo':{ 'Y': 5},//baño error
    'SA106-NP':{ 'Z': 5},
    'SA108-NP':{ 'a': 5},

    'escalera1c':{ 'b': 5},
    'entradapatio2':{ 'b': 5},
    'escalera1B':{ 'K': 5},




    //PISO 2
    'escalera1A': { 'C': 5 },
    'C2': { 'escalera1A': 5, 'D2': 5, 'DEC': 5 , 'UP': 5},//la escalera cambia
    'D2': { 'C2': 5, 'SSHH-AD-2': 5, 'L2': 5, 'E2': 5 },
    'E2': { 'D2': 5, 'SA213-AP': 5, 'F2': 5, 'SA201-AP': 5},
    'F2': { 'E2': 5, 'ODG': 5, 'SA202-AP': 5, 'G2': 5},
    'G2': { 'F2': 5, 'SA212-AP': 5, 'H2': 5, 'SA203-AP': 5 },
    'H2': { 'G2': 5, 'SA211-AP': 5, 'SA204-AP': 5, 'I2': 5 },
    'I2': { 'H2': 5, 'SA210-AP': 5, 'SA205-AP': 5, 'A2': 5 },
    'A2': { 'I2': 5, 'TE': 5, 'SA206-AP': 5, 'J2': 5 },
    'J2': { 'A2': 5, 'SA209-AP': 5, 'B2': 5, 'K2': 5},
    'B2': { 'J2': 5, 'SA207-AP': 5, 'AM': 5, 'BB2': 5},
    'BB2': { 'B2': 5, 'GI': 5},
    'K2': { 'J2': 5, 'escalera1B': 5}, //aca hay datos faltantes

    'L2': { 'D2': 5, 'UPPN': 5, 'M2': 5 },
    'M2': { 'L2': 5, 'OCAA': 5, 'N2': 5 },
    'N2': { 'M2': 5, 'escalera1d': 5, 'O2': 5 }, //escalera
    'O2': { 'N2': 5, 'baño1p': 5, 'entradapatio': 5, 'P2': 5  },//patio
    'P2': { 'O2': 5, 'Q2': 5 },
    'Q2': { 'P2': 5, 'R2': 5 },
    'R2': { 'Q2': 5, 'COM': 5, 'S2': 5 },
    'S2': { 'R2': 5, 'T2': 5 },
    'T2': { 'S2': 5, 'U2': 5 },

    'U2': { 'T2': 5, 'V2': 5, 'X2': 5 },
    'V2': { 'U2': 5, 'SA203-NP': 5, 'SA204-NP': 5, 'W2': 5 },
    'W2': { 'V2': 5, 'SA201-NP': 5, 'SA202-NP': 5},

    'X2': { 'U2': 5, 'escaleran': 5, 'Y2': 5 },
    'Y2': { 'X2': 5, 'SA205-NP': 5, 'bañonuevo': 5, 'Z2': 5 },
    'Z2': { 'Y2': 5, 'LA001': 5, 'DTC': 5, 'a2': 5 },
    'a2': { 'Z2': 5, 'LA003': 5, 'LA002': 5, 'b2': 5 },
    'b2': { 'a2': 5, 'escalera1c': 5, 'entradapatio2': 5 },//aaaaaaa

    'SA201-AP':{ 'E2': 5},
    'SA202-AP':{ 'F2': 5},
    'SA203-AP':{ 'G2': 5},
    'SA204-AP':{ 'H2': 5},
    'SA205-AP':{ 'I2': 5},
    'SA206-AP':{ 'A2': 5},
    
    'SA213-AP':{ 'E2': 5},
    'ODG':{ 'F2': 5},
    'SA212-AP':{ 'G2': 5},
    'SA211-AP':{ 'H2': 5},
    'SA210-AP':{ 'I2': 5},
    'TE':{ 'A2': 5},

    'SA209-AP':{ 'J2': 5},
    'AM':{ 'B2': 5},
    'SA207-AP':{ 'B2': 5},
    'GI':{ 'BB2': 5},
    'escalera1B':{ 'K2': 5}, //AAAAAA

    'escalera1A':{ 'C2': 5}, //AAAAAA
    'DEC':{ 'C2': 5},
    'UP':{ 'C2': 5},
    'SSHH-AD-2':{ 'D2': 5},
    'UPPN':{ 'L2': 5},
    'OCAA':{ 'M2': 5},
    'escalera1d':{ 'N2': 5},
    'baño1p':{ 'O2': 5},
//ACA FALTA EL DE SC

    'COM':{ 'R2': 5},

    'SA201-NP':{ 'W2': 5},
    'SA202-NP':{ 'W2': 5},
    'SA203-NP':{ 'V2': 5},
    'SA204-NP':{ 'V2': 5},

    'escaleran':{ 'X2': 5}, //aaaaaaaaaaaaaaaaaaa

    'SA205-NP':{ 'Y2': 5},//CAMBIA POR NP
    'bañonuevo':{ 'Y2': 5},
    'DTC':{ 'Z2': 5},
    'LA001':{ 'Z2': 5},
    'LA002':{ 'a2': 5},
    'LA003':{ 'a2': 5},

    'escalera1c':{ 'b2': 5},

    //PISO 3
    'escalera1A': { 'C3': 5 },
    'C3': { 'escalera1A': 5, 'D3': 5, 'OF309': 5 },//la escalera cambia
    'D3': { 'C3': 5, 'SSHH-D-AP3': 5, 'L3': 5, 'E3': 5 },
    'E3': { 'D3': 5, 'SA310-AP': 5, 'F3': 5, 'LA307-AP': 5},
    'F3': { 'E3': 5, 'LA303-AP': 5, 'G3': 5},
    'G3': { 'F3': 5, 'LA301-AP': 5, 'H3': 5, 'LA306-AP': 5 },
    'H3': { 'G3': 5, 'SA302-AP': 5, 'LA305-AP': 5, 'I3': 5 },
    'I3': { 'H3': 5, 'SA309-AP': 5, 'A3': 5 },
    'A3': { 'I3': 5, 'SA311-AP': 5, 'LA304-AP': 5, 'J3': 5 },
    'J3': { 'A3': 5, 'LA308-AP': 5, 'K3': 5},
    'K3': { 'J3': 5, 'escalera1B': 5}, 

    'L3': { 'D3': 5, 'OF311': 5, 'M3': 5 },
    'M3': { 'L3': 5, 'UN-MA': 5, 'N3': 5 },
    'N3': { 'M3': 5, 'escalera1d': 5, 'O3': 5 }, //escalera
    'O3': { 'N3': 5, 'baño1p': 5, 'P3': 5  },//patio
    'P3': { 'O3': 5, 'Q3': 5 },
    'Q3': { 'P3': 5, 'R3': 5 },
    'R3': { 'Q3': 5, 'UN-PO': 5, 'S3': 5 },
    'S3': { 'R3': 5, 'T3': 5 },
    'T3': { 'S3': 5, 'U3': 5 },

    'U3': { 'T3': 5, 'SA302-NP': 5, 'SA301-NP': 5, 'X3': 5 },

    'X3': { 'U3': 5, 'escaleran': 5, 'Y3': 5 },
    'Y3': { 'X3': 5, 'LA303-NP': 5, 'SSHH-P3': 5, 'Z3': 5 },
    'Z3': { 'Y3': 5, 'LA305-NP': 5, 'LA304-NP': 5, 'a3': 5 },
    'a3': { 'Z3': 5, 'LA307-NP': 5, 'LA306-NP': 5, 'b3': 5 },
    'b3': { 'a3': 5, 'escalera1c': 5},//aaaaaaa


    'LA307-AP':{ 'E3': 5},
    'LA306-AP':{ 'G3': 5},
    'LA305-AP':{ 'H3': 5},
    'LA304-AP':{ 'A3': 5},

    'SA310-AP':{ 'E3': 5},
    'LA303-AP':{ 'F3': 5},
    'LA301-AP':{ 'G3': 5},
    'SA302-AP':{ 'H3': 5},
    'SA309-AP':{ 'I3': 5},
    'SA311-AP':{ 'A3': 5},
    'LA308-AP':{ 'J3': 5},

    'OF309':{ 'C3': 5},
    'SSHH-D-AP3':{ 'D3': 5},
    'OF311':{ 'L3': 5},
    'UN-MA':{ 'M3': 5},

    'bañonuevo':{ 'Y3': 5},

    'UN-PO':{ 'R3': 5},

    'SA302-NP':{ 'U3': 5},
    'SA301-NP':{ 'U3': 5},

    'LA303-NP':{ 'Y3': 5},
    'LA305-NP':{ 'Z3': 5},
    'LA307-NP':{ 'a3': 5},

    'bañonuevo':{ 'Y3': 5},
    'LA304-NP':{ 'Z3': 5},
    'LA306-NP':{ 'a3': 5},

    'baño1p':{ 'O3': 5},





    //uniones
    'union1A':{ 'escalera1A': 1, 'C': 1, 'C2':1, 'C3':1},
    'escalera1A':{ 'union1A': 1},

    'union1B':{ 'escalera1B': 1, 'K': 1, 'K2':1, 'K3':1},
    'escalera1B':{ 'union1B': 1},

    'union1c':{ 'escalera1c': 1, 'b': 1, 'b2':1, 'b3':1},
    'escalera1c':{ 'union1c': 1},

    'union1d':{ 'escalera1d': 1, 'N': 1, 'N2':1, 'N3':1},
    'escalera1d':{ 'union1d': 1},

    'unionn':{ 'escaleran': 1, 'X': 1, 'X2':1, 'X3':1},
    'escaleran':{ 'unionn': 1},


};


// Coordenadas para los puntos
const coordinates = {
    //DEL PISO 1
    "entrada": [
        -77.08576530424632,
        -12.053524670187853
    ],
    "A": [
        -77.0857680137789,
        -12.053507509814862
    ],
    "UTD": [
        -77.08580210873049,
        -12.053512025702492
    ],
    "B": [
        -77.08577140069461,
        -12.053479511311561
    ],
    "UDE": [
        -77.0858057214406,
        -12.053483575610429
    ],
    "B1": [
        -77.08579646387096,
        -12.053482220844138
    ],
    "DAD": [
        -77.08579872181478,
        -12.053465060471147
    ],
    "CERSEU": [
        -77.08577343284405,
        -12.053461447761045
    ],
    "C": [
        -77.08571246836105,
        -12.053471382713829
    ],
    "escalera1A": [
        -77.08571201677229,
        -12.05348086607785
    ],
    "union1A": [
        -77.08571201677229,
        -12.05348086607785
    ],
    "D": [
        -77.08572420966888,
        -12.05338467767135
    ],
    "OCA": [
        -77.08577072331147,
        -12.053389193558978
    ],
    "E": [
        -77.0856375046264,
        -12.053369775242173
    ],
    "SA109-AP": [
        -77.08564066574775,
        -12.05334132515011
    ],
    "SA101-AP": [
        -77.0856338919163,
        -12.05339732215671
    ],
    "F": [
        -77.08554267098617,
        -12.053357582345571
    ],
    "G": [
        -77.08547764220431,
        -12.05334809898155
    ],
    "H": [
        -77.08540629117978,
        -12.053339067206291
    ],
    "I": [
        -77.08531777978224,
        -12.053330035431035
    ],
    "J": [
        -77.0852342358611,
        -12.053321906833302
    ],
    "K": [
        -77.08522159137574,
        -12.053405450754441
    ],
    "salida1A": [
        -77.08523423586111,
        -12.053425772248769
    ],
    "kiosco": [
        -77.0852161723106,
        -12.053442029444234
    ],
    "escalera1B": [
        -77.08519630240502,
        -12.053437513556604
    ],
    "SA108-AP": [
        -77.08554696107943,
        -12.053329583842268
    ],
    "SA102-AP": [
        -77.0855374777154,
        -12.05338558084887
    ],
    "SA107-AP": [
        -77.08548238388633,
        -12.053321455244536
    ],
    "LA011": [
        -77.08531394127778,
        -12.05335758234557
    ],
    "LA008": [
        -77.0852380743656,
        -12.053292553563711
    ],
    "BTC": [
        -77.08520239885334,
        -12.053295714685051
    ],
    "L": [
        -77.08572940293969,
        -12.05334403468268
    ],
    "M": [
        -77.08573572518237,
        -12.053298875806389
    ],
    "N": [
        -77.08574340219135,
        -12.053255974873911
    ],
    "O": [
        -77.08575243396662,
        -12.053185527026896
    ],
    "entradapatio": [
        -77.08570908144537,
        -12.05318146272803
    ],
    "P": [
        -77.08575559508797,
        -12.053154818991018
    ],
    "Q": [
        -77.0857027592027,
        -12.053147141982048
    ],
    "R": [
        -77.08571901639817,
        -12.05301708441833
    ],
    "S": [
        -77.08573030611724,
        -12.052930830964613
    ],
    "T": [
        -77.08576146574188,
        -12.052855415641206
    ],
    "U": [
        -77.08577817452603,
        -12.052759678823467
    ],
    "V": [
        -77.08582333340232,
        -12.0527678074212
    ],
    "W": [
        -77.08589332966058,
        -12.05277729078522
    ],
    "X": [
        -77.08574520854634,
        -12.052754711347074
    ],
    "Y": [
        -77.08562418275788,
        -12.052734841441506
    ],
    "Z": [
        -77.0855388324817,
        -12.052722196956145
    ],
    "a": [
        -77.08545393379427,
        -12.052709552470782
    ],
    "b": [
        -77.08540154949777,
        -12.052702327050577
    ],
    "entradapatio2": [
        -77.08539251772251,
        -12.05273709938532
    ],
    "union1c": [
        -77.08541780669324,
        -12.052635491913666
    ],
    "SA108-NP": [
        -77.0854498694954,
        -12.052735293030269
    ],
    "SA109-NP": [
        -77.08545890127067,
        -12.052686521443874
    ],
    "SA106-NP": [
        -77.08553431659406,
        -12.052748840693157
    ],
    "SA107-NP": [
        -77.08554334836933,
        -12.052698714340472
    ],
    "bañoonuevo": [
        -77.08562057004778,
        -12.052762388356044
    ],
    "SA105-NP": [
        -77.08562734387922,
        -12.052711810414598
    ],
    "escaleran": [
        -77.08575740144293,
        -12.052686521443878
    ],
    "SA103-NP": [
        -77.0858273977012,
        -12.052741615272952
    ],
    "SGDFG": [
        -77.08581972069223,
        -12.052793547980688
    ],
    "SA101-NP": [
        -77.08589739395946,
        -12.052752904992024
    ],
    "SA102-NP": [
        -77.08588971695049,
        -12.05280483769976
    ],
    "entradapatio3": [
        -77.08569237266109,
        -12.05282967508172
    ],
    "AUD": [
        -77.08574001527558,
        -12.05301934236214
    ],
    "baño1p": [
        -77.08580820517876,
        -12.053191397680814
    ],
    "escalera1d": [
        -77.08584433227983,
        -12.053267716181745
    ],
    "USGOM": [
        -77.08578065826426,
        -12.053304746460304
    ],
    "DACC": [
        -77.08577569078787,
        -12.053350356925359
    ],
    "SA103-AP": [
        -77.08540109790901,
        -12.053368420475879
    ],
    "SA105-AP": [
        -77.08532252146426,
        -12.053302488516493
    ],
    "SA106-AP": [
        -77.08541012968426,
        -12.05331287505804
    ],

    //DEL PISO 2
    "SA203-AP": [
        -77.08552591129579,
        -12.053382473214569
    ],
    "A2": [
        -77.08530929045031,
        -12.053325492513904
    ],
    "TE": [
        -77.08531305776935,
        -12.053301475854944
    ],
    "DEC": [
        -77.08575020952495,
        -12.053459732886537
    ],
    "UP": [
        -77.08576466514089,
        -12.053437570255715
    ],
    "C2": [
        -77.08571804456747,
        -12.053427681043196
    ],
    "escalera1A": [
        -77.08571201677229,
        -12.05348086607785
    ],
    "D2": [
        -77.08572420966888,
        -12.05338467767135
    ],
    "SSHH-AD-2": [
        -77.08577072331147,
        -12.053389193558978
    ],
    "E2": [
        -77.0856375046264,
        -12.053369775242173
    ],
    "SA-213-AP": [
        -77.08564066574775,
        -12.05334132515011
    ],
    "SA201-AP": [
        -77.0856338919163,
        -12.05339732215671
    ],
    "F2": [
        -77.08559183937933,
        -12.053362694789554
    ],
    "G2": [
        -77.08553014952984,
        -12.053353747406804
    ],
    "H2": [
        -77.08545762863808,
        -12.053343858194289
    ],
    "I2": [
        -77.08537098029988,
        -12.053333027152012
    ],
    "J2": [
        -77.08523517769085,
        -12.05331531402496
    ],
    "K2": [
        -77.08522159137574,
        -12.053405450754441
    ],
    "salida1A": [
        -77.08523423586111,
        -12.053425772248769
    ],
    "SA206-AP": [
        -77.08530269764196,
        -12.053354218321678
    ],
    "union1B": [
        -77.08519630240502,
        -12.053437513556604
    ],
    "ODG": [
        -77.08559372303885,
        -12.053334910811543
    ],
    "SA202-AP": [
        -77.08558807206028,
        -12.053390007852684
    ],
    "SA212-AP": [
        -77.08553297501913,
        -12.053328318003201
    ],
    "SA205-AP": [
        -77.08562734387922,
        -12.052711810414598
    ],
    "SA209-AP": [
        -77.0852380743656,
        -12.053292553563711
    ],
    "AM": [
        -77.08518402709187,
        -12.053286406578737
    ],
    "L2": [
        -77.08572940293969,
        -12.05334403468268
    ],
    "M2": [
        -77.08573572518237,
        -12.053298875806389
    ],
    "N2": [
        -77.08577408343845,
        -12.053261448090016
    ],
    "O2": [
        -77.08578632722538,
        -12.053158317730958
    ],
    "SA207-AP": [
        -77.08517555062394,
        -12.053339149045469
    ],
    "P2": [
        -77.08575559508797,
        -12.053154818991018
    ],
    "Q2": [
        -77.0857027592027,
        -12.053147141982048
    ],
    "R2": [
        -77.08571901639817,
        -12.05301708441833
    ],
    "S2": [
        -77.08573030611724,
        -12.052930830964613
    ],
    "T2": [
        -77.08576146574188,
        -12.052855415641206
    ],
    "U2": [
        -77.08577817452603,
        -12.052759678823467
    ],
    "V2": [
        -77.08582333340232,
        -12.0527678074212
    ],
    "W2": [
        -77.08589332966058,
        -12.05277729078522
    ],
    "X2": [
        -77.08574520854634,
        -12.052754711347074
    ],
    "Y2": [
        -77.08562418275788,
        -12.052734841441506
    ],
    "Z2": [
        -77.0855388324817,
        -12.052722196956145
    ],
    "a2": [
        -77.08545393379427,
        -12.052709552470782
    ],
    "b2": [
        -77.08540154949777,
        -12.052702327050577
    ],
    "entradapatio2": [
        -77.08539251772251,
        -12.05273709938532
    ],
    "escalera1c": [
        -77.08541780669324,
        -12.052635491913666
    ],
    "LA002": [
        -77.0854498694954,
        -12.052735293030269
    ],
    "LA003": [
        -77.08545890127067,
        -12.052686521443874
    ],
    "DTC": [
        -77.08553431659406,
        -12.052748840693157
    ],
    "LA001": [
        -77.08554334836933,
        -12.052698714340472
    ],
    "bañonuevo": [
        -77.08562057004778,
        -12.052762388356044
    ],
    "SA205-NP": [ 
        -77.085627343879224, 
        -12.052711810414598 
    ],
    "unionn": [
        -77.08575740144293,
        -12.052686521443878
    ],
    "SA203-NP": [
        -77.0858273977012,
        -12.052741615272952
    ],
    "SA204-NP": [
        -77.08581972069223,
        -12.052793547980688
    ],
    "SA201-NP": [
        -77.08589739395946,
        -12.052752904992024
    ],
    "SA202-NP": [
        -77.08588971695049,
        -12.05280483769976
    ],
    "COM": [
        -77.08574001527558,
        -12.05301934236214
    ],
    "union1d": [
        -77.08584433227983,
        -12.053267716181745
    ],
    "OCAA": [
        -77.08578065826426,
        -12.053304746460304
    ],
    "UPPN": [
        -77.08577569078787,
        -12.053350356925359
    ],
    "SA204-AP": [
        -77.08545150674463,
        -12.053372584002066
    ],
    "SA210-AP": [
        -77.08537474761894,
        -12.053309010493054
    ],
    "SA211-AP": [
        -77.0854599832125,
        -12.053319370620452
    ],
    "B2": [
        -77.08518120160252,
        -12.053307126833523
    ],
    "BB2": [
        -77.08510585522146,
        -12.053297237621011
    ],
    "GI": [
        -77.08510067515776,
        -12.05333020166272
    ],

    //del piso 3
    "LA306-AP": [
        -77.08552591129579,
        -12.053382473214569
    ],
    "A3": [
        -77.08530929045031,
        -12.053325492513904
    ],
    "SA311-AP": [
        -77.08531305776935,
        -12.053301475854944
    ],
    "OF309": [
        -77.08576466514089,
        -12.053437570255715
    ],
    "C3": [
        -77.08571804456747,
        -12.053427681043196
    ],
    "escalera1A": [
        -77.08571201677229,
        -12.05348086607785
    ],
    "D3": [
        -77.08572420966888,
        -12.05338467767135
    ],
    "SSHH-D-AP3": [
        -77.08577072331147,
        -12.053389193558978
    ],
    "E3": [
        -77.0856375046264,
        -12.053369775242173
    ],
    "SA310-AP": [
        -77.08564066574775,
        -12.05334132515011
    ],
    "LA307-AP": [
        -77.0856338919163,
        -12.05339732215671
    ],
    "F3": [
        -77.08559183937933,
        -12.053362694789554
    ],
    "G3": [
        -77.08553014952984,
        -12.053353747406804
    ],
    "H3": [
        -77.08545762863808,
        -12.053343858194289
    ],
    "I3": [
        -77.08537098029988,
        -12.053333027152012
    ],
    "J3": [
        -77.08523517769085,
        -12.05331531402496
    ],
    "K3": [
        -77.08522159137574,
        -12.053405450754441
    ],
    "salida1A": [
        -77.08523423586111,
        -12.053425772248769
    ],
    "LA304-AP": [
        -77.08530269764196,
        -12.053354218321678
    ],
    "escalera1B": [
        -77.08519630240502,
        -12.053437513556604
    ],
    "LA303-AP": [
        -77.08559372303885,
        -12.053334910811543
    ],
    "LA301-AP": [
        -77.08553297501913,
        -12.053328318003201
    ],
    "LA308-AP": [
        -77.0852380743656,
        -12.053292553563711
    ],
    "L3": [
        -77.08572940293969,
        -12.05334403468268
    ],
    "M3": [
        -77.08573572518237,
        -12.053298875806389
    ],
    "N3": [
        -77.08577408343845,
        -12.053261448090016
    ],
    "O3": [
        -77.08578632722538,
        -12.053158317730958
    ],
    "P3": [
        -77.08575559508797,
        -12.053154818991018
    ],
    "Q3": [
        -77.0857027592027,
        -12.053147141982048
    ],
    "R3": [
        -77.08571901639817,
        -12.05301708441833
    ],
    "S3": [
        -77.08573030611724,
        -12.052930830964613
    ],
    "T3": [
        -77.08576146574188,
        -12.052855415641206
    ],
    "U3": [
        -77.08577817452603,
        -12.052759678823467
    ],
    "X3": [
        -77.08574520854634,
        -12.052754711347074
    ],
    "Y3": [
        -77.08562418275788,
        -12.052734841441506
    ],
    "Z3": [
        -77.0855388324817,
        -12.052722196956145
    ],
    "a3": [
        -77.08545393379427,
        -12.052709552470782
    ],
    "b3": [
        -77.08540154949777,
        -12.052702327050577
    ],
    "entradapatio2": [
        -77.08539251772251,
        -12.05273709938532
    ],
    "escalera1c": [
        -77.08541780669324,
        -12.052635491913666
    ],
    "LA306-NP": [
        -77.0854498694954,
        -12.052735293030269
    ],
    "LA307-NP": [
        -77.08545890127067,
        -12.052686521443874
    ],
    "LA304-NP": [
        -77.08553431659406,
        -12.052748840693157
    ],
    "LA305-NP": [
        -77.08554334836933,
        -12.052698714340472
    ],
    "SSHH-P3": [
        -77.08581222754385,
        -12.05316208505001
    ],
    "LA303-NP": [
        -77.08562734387922,
        -12.052711810414598
    ],
    "escaleran": [
        -77.08575740144293,
        -12.052686521443878
    ],
    "SA301-NP": [
        -77.0857824070753,
        -12.052735740700783
    ],
    "SA302-NP": [
        -77.08578848516214,
        -12.052761166192628
    ],
    "UN-PO": [
        -77.08574001527558,
        -12.05301934236214
    ],
    "escalera1d": [
        -77.08584433227983,
        -12.053267716181745
    ],
    "UN-MA": [
        -77.08578065826426,
        -12.053304746460304
    ],
    "OF311": [
        -77.08577569078787,
        -12.053350356925359
    ],
    "LA305-AP": [
        -77.08545150674463,
        -12.053372584002066
    ],
    "SA309-AP": [
        -77.08537474761894,
        -12.053309010493054
    ],
    "SA302-AP": [
        -77.0854599832125,
        -12.053319370620452
    ]
};

//ALGORITMO DIJSTRA
function dijkstra(graph, start, end) {
    const shortestDistanceNode = (distances, visited) => {
        let shortest = null;

        for (let node in distances) {
            let currentIsShortest = shortest === null || distances[node] < distances[shortest];
            if (currentIsShortest && !visited.includes(node)) {
                shortest = node;
            }
        }
        return shortest;
    };

    let distances = {};
    distances[end] = Infinity;
    distances = Object.assign(distances, graph[start]);

    let parents = { end: null };
    for (let child in graph[start]) {
        parents[child] = start;
    }

    let visited = [];

    let node = shortestDistanceNode(distances, visited);

    while (node) {
        let distance = distances[node];
        let children = graph[node];

        for (let child in children) {
            if (String(child) === String(start)) {
                continue;
            } else {
                let newDistance = distance + children[child];
                if (!distances[child] || distances[child] > newDistance) {
                    distances[child] = newDistance;
                    parents[child] = node;
                }
            }
        }
        visited.push(node);
        node = shortestDistanceNode(distances, visited);
    }

    let shortestPath = [end];
    let parent = parents[end];
    while (parent) {
        shortestPath.unshift(parent);
        parent = parents[parent];
    }

    return {
        distance: distances[end],
        path: shortestPath
    };
}

// Ejemplo de uso
//const startNode = 'A';
//const endNode = 'D';
//const result = dijkstra(graph, startNode, endNode);

//console.log(`Distancia más corta de ${startNode} a ${endNode}: ${result.distance}`);
//console.log(`Ruta más corta: ${result.path.join(' -> ')}`);



function mostrarRuta(startNode, endNode, pisoInicio, pisoFin) {
    // Eliminar todos los marcadores existentes
    removeAllMarkers();

    toggleLayer(pisoInicio);
    // Ocultar todas las rutas existentes
    ['route1', 'route2', 'route3'].forEach(function(routeId) {
        if (map.getLayer(routeId)) {
            map.setLayoutProperty(routeId, 'visibility', 'none');
        }
    });

    let pathCoordinates1, pathCoordinates2;
    let routeId1 = 'route' + pisoInicio;
    let routeId2 = 'route' + pisoFin;

    let graphId1 = 'graph' + pisoInicio;
    let graphId2 = 'graph' + pisoFin;

    console.log("Grafos: ");
    console.log(graphId1);
    console.log(graphId2);

    // Crear un marcador en el nodo inicial
    let startCoordinates = coordinates[startNode];
    const startMarker = new mapboxgl.Marker({ color: 'green' })
        .setLngLat(startCoordinates)
        .addTo(map);
    if (pisoInicio === 1) {
        markers1.push({ marker: startMarker, layerId: pisoInicio });
    } else if (pisoInicio === 2) {
        markers2.push({ marker: startMarker, layerId: pisoInicio });
    } else if (pisoInicio === 3) {
        markers3.push({ marker: startMarker, layerId: pisoInicio });
    }
    console.log(`Coordenadas del nodo inicial (${startNode}):`, startCoordinates);

    if (pisoInicio !== pisoFin) {
        var escaleraCerca = escaleraMasCercana(graph, startNode);
        console.log("Escalera más cercana:", escaleraCerca);

        let result1 = dijkstra(graph, startNode, escaleraCerca);
        console.log("Camino del nodo inicial a la escalera más cercana:", result1.path);

        let result2 = dijkstra(graph, escaleraCerca, endNode);
        console.log("Camino de la escalera más cercana al nodo final:", result2.path);

        pathCoordinates1 = result1.path.map(node => coordinates[node]);
        pathCoordinates2 = result2.path.map(node => coordinates[node]);

        if (!map.getSource(routeId1)) {
            map.addSource(routeId1, {
                'type': 'geojson',
                'data': {
                    'type': 'Feature',
                    'properties': {},
                    'geometry': {
                        'type': 'LineString',
                        'coordinates': pathCoordinates1
                    }
                }
            });

            map.addLayer({
                'id': routeId1,
                'type': 'line',
                'source': routeId1,
                'layout': {
                    'line-join': 'round',
                    'line-cap': 'round'
                },
                'paint': {
                    'line-color': '#FF0000',
                    'line-width': 8
                }
            });
        } else {
            map.getSource(routeId1).setData({
                'type': 'Feature',
                'properties': {},
                'geometry': {
                    'type': 'LineString',
                    'coordinates': pathCoordinates1
                }
            });
        }

        if (!map.getSource(routeId2)) {
            map.addSource(routeId2, {
                'type': 'geojson',
                'data': {
                    'type': 'Feature',
                    'properties': {},
                    'geometry': {
                        'type': 'LineString',
                        'coordinates': pathCoordinates2
                    }
                }
            });

            map.addLayer({
                'id': routeId2,
                'type': 'line',
                'source': routeId2,
                'layout': {
                    'line-join': 'round',
                    'line-cap': 'round'
                },
                'paint': {
                    'line-color': '#0000FF',
                    'line-width': 8
                }
            });
        } else {
            map.getSource(routeId2).setData({
                'type': 'Feature',
                'properties': {},
                'geometry': {
                    'type': 'LineString',
                    'coordinates': pathCoordinates2
                }
            });
        }

        map.setLayoutProperty(routeId1, 'visibility', 'visible');
        map.setLayoutProperty(routeId2, 'visibility', 'none');

    } else {
        let result = dijkstra(graph, startNode, endNode);
        console.log("Camino del nodo inicial al nodo final:", result.path);

        let pathCoordinates = result.path.map(node => coordinates[node]);

        // Ocultar y eliminar todas las rutas que no corresponden al piso actual
        ['route1', 'route2', 'route3'].forEach(function(routeId) {
            if (routeId !== routeId1) {
                if (map.getLayer(routeId)) {
                    map.removeLayer(routeId);
                }
                if (map.getSource(routeId)) {
                    map.removeSource(routeId);
                }
            }
        });

        if (!map.getSource(routeId1)) {
            map.addSource(routeId1, {
                'type': 'geojson',
                'data': {
                    'type': 'Feature',
                    'properties': {},
                    'geometry': {
                        'type': 'LineString',
                        'coordinates': pathCoordinates
                    }
                }
            });

            map.addLayer({
                'id': routeId1,
                'type': 'line',
                'source': routeId1,
                'layout': {
                    'line-join': 'round',
                    'line-cap': 'round'
                },
                'paint': {
                    'line-color': '#888',
                    'line-width': 8
                }
            });
        } else {
            map.getSource(routeId1).setData({
                'type': 'Feature',
                'properties': {},
                'geometry': {
                    'type': 'LineString',
                    'coordinates': pathCoordinates
                }
            });
        }

        map.setLayoutProperty(routeId1, 'visibility', 'visible');
    }

    // Crear un marcador en el nodo final
    let endCoordinates = coordinates[endNode];
    const endMarker = new mapboxgl.Marker({ color: 'red' })
        .setLngLat(endCoordinates)
        .addTo(map);
    if (pisoFin === 1) {
        markers1.push({ marker: endMarker, layerId: pisoFin });
    } else if (pisoFin === 2) {
        markers2.push({ marker: endMarker, layerId: pisoFin });
    } else if (pisoFin === 3) {
        markers3.push({ marker: endMarker, layerId: pisoFin });
    }
    console.log(`Coordenadas del nodo final (${endNode}):`, endCoordinates);
}




//encuentra la escalera mas cercana
// Algoritmo de Dijkstra modificado para devolver el nodo más cercano
function dijkstraNodoMasCercano(graph, startNode, targetNodes) {
    const distances = {};
    const visited = new Set();
    const queue = new PriorityQueue();

    // Inicializar todas las distancias como infinito y la distancia al nodo inicial como 0
    for (let node in graph) {
        distances[node] = Infinity;
    }
    distances[startNode] = 0;

    // Añadir el nodo inicial a la cola de prioridad
    queue.enqueue(startNode, 0);

    while (!queue.isEmpty()) {
        const { element: currentNode } = queue.dequeue();
        visited.add(currentNode);

        // Si el nodo actual es uno de los nodos objetivo, devolverlo
        if (targetNodes.includes(currentNode)) {
            return currentNode;
        }

        for (let neighbor in graph[currentNode]) {
            if (!visited.has(neighbor)) {
                let newDist = distances[currentNode] + graph[currentNode][neighbor];
                if (newDist < distances[neighbor]) {
                    distances[neighbor] = newDist;
                    queue.enqueue(neighbor, newDist);
                }
            }
        }
    }

    return null; // Si no se encuentra ningún nodo objetivo
}

// Cola de prioridad simple para el algoritmo de Dijkstra
class PriorityQueue {
    constructor() {
        this.items = [];
    }

    enqueue(element, priority) {
        const queueElement = { element, priority };
        let added = false;

        for (let i = 0; i < this.items.length; i++) {
            if (queueElement.priority < this.items[i].priority) {
                this.items.splice(i, 0, queueElement);
                added = true;
                break;
            }
        }

        if (!added) {
            this.items.push(queueElement);
        }
    }

    dequeue() {
        return this.items.shift();
    }

    isEmpty() {
        return this.items.length === 0;
    }
}

// Función para encontrar la escalera más cercana
function escaleraMasCercana(graph, startNode) {
    const escaleras = ['escalera1A', 'escalera1B', 'escalera1c', 'escalera1d', 'escaleran'];
    return dijkstraNodoMasCercano(graph, startNode, escaleras);
}